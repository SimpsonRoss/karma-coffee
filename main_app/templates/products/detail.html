


<!-- JIHYEON -->

{% extends 'base.html' %} 
{% block content %}

<main>
  <div
    class="position-relative overflow-hidden text-center"
    style="height: 150rem"
  >

  <div class="d-md-flex flex-md-equal w-100"
  style="height: 30%; background-color: #F9F6F0;">
    <div
      class="overflow-hidden"
      style="width: 70%; text-align: center; display: flex; align-items: center; justify-content: center;"
    ><img src="../../static/media/product.png" alt="Product">
    </div>

    <div
    class="overflow-hidden" style="display: flex; align-items: center; justify-content: center;"
  >
    <div class="my-3 p-3" style="text-align: left;">
      <h2 class="display-5" style="font-weight: bold;">{{ product.name }}</h2>
      <p class="lead">${{ product.price }}</p>
      <p class="lead">{{ product.flavour }}</p>
      <p class="lead">{{ product.description }}</p>

      <form action="{% url 'add_to_cart' product.id %}" method="POST">
        {% csrf_token %}
        <select class="form-select" aria-label="Default select example">
            <option value="8" selected>250g / ${{ product.price }}</option>
        </select>
        <div class="form-outline">
            <input type="number" id="typeNumber" name="quantity" class="form-control" value="1" min="1"/>
        </div>
        <button type="submit" class="btn btn-primary">Add to Cart</button>
    </form>
    

    </div>
  </div>
</div>

 <div class="d-md-flex flex-md-equal w-100" style="height: 25%; background-color: #fffcf7;">
  <div
    class="px-md-5 text-center overflow-hidden"
    style="width: 50%;"
  >
    <div class="my-3 p-3">
      <h2>Flavour Notes</h2>
      <p class="lead">{{ product.flavour }}</p>
      <h2>Flavour</h2>
      <p>{{ product.roast }}</p>
      <h2>Roast</h2>
      <p>{{ product.roast }}</p>
    </div>
  </div>

  <div
    class="text-center overflow-hidden" style="width: 50%; display: flex; align-items: center; justify-content: center;"
  >
    <div>
      <img src="../../static/media/fields.webp" style="height: 30rem;">
    </div>
  </div>
</div>

<div>
    <h1>Reviews</h1>

    {% if not request.user.is_authenticated %}
        <p>Log in to leave a review</p>
    {% elif review_form %}
            <form action="{% url 'add_review' product.id %}" method="POST">
                {% csrf_token %}
                {{ review_form.as_p }}
                <button type="submit">Add Review</button>
            </form>
    {% else %}
        <p>You can only write a review for this product after it has been delivered.</p>
    {% endif %}

    {% for review in product.reviews.all %}
        <div style="border: 1px solid grey">
            <p>Purchase Date: {{ review.purchase_date }}</p>
            <p>Review Date: {{ review.review_date }}</p>
            <p>Rating: {{ review.rating }}</p>
            <p>Content: {{ review.content }}</p>
            {% if request.user == review.user %}
                <form action="{% url 'delete_review' product.id %}" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="review_id" value="{{ review.id }}">
                    <input type="submit" value="DELETE" onclick="return confirm('Delete this review?')" />
                </form>
            {% endif %}
        </div>
    {% endfor %}
</div>
</main>

{% endblock %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>

{% endif %}
